import{_ as Q,a as U,o as W,a5 as x,C as t,aF as X,aG as V,aH as w,aI as j,aJ as S,aK as q,aL as z,aM as F,g as $,x as a,B as s,z as i,A as d,D as u,y as n,a2 as C,a6 as D,a7 as A}from"./B2IfDSsY.js";import{f as Y,d as B,g as h,i as N,e as Z}from"./0iUmDY_O.js";import{V as tt}from"./CxD5zTo_.js";import{V as E}from"./CsIdqH_n.js";import{V as et,a as at,b as st}from"./BPbMoCeH.js";import"./Csi6KsHR.js";import"./gxT_hVh6.js";const ot={class:"text-center mb-6"},rt={class:"text-h4 text-md-h3 text-xl-h2 font-weight-bold text-grey-darken-3 mb-2"},nt={class:"d-flex align-center justify-center font-weight-bold text-subtitle-1 text-grey-darken-2 my-4"},ct={class:"text-justify mx-auto",style:{"max-width":"900px"}},it={class:"text-center mb-4"},dt={class:"text-h5 text-md-h4 font-weight-medium text-blue-grey-darken-3"},lt={key:0,class:"text-subtitle-1 text-grey-darken-1 mt-2"},ut={key:0,class:"mt-4"},mt={key:0,class:"text-subtitle-2 font-weight-bold text-teal mb-1 ml-4 d-flex align-center"},pt={key:1,class:"text-center text-caption text-grey font-italic"},ft={__name:"index",setup(xt){const{$db:m}=U(),P=X(),y=$(!0),c=$(null),M=P.params.id,T=async b=>{y.value=!0;try{if(!b)return;const[e,o]=b.split("-"),p=V(m,"modulos"),l=w(p,j("articulo","==",e),j("fraccion","==",o.toString())),g=await S(l);if(g.empty){c.value=null,y.value=!1;return}const _=g.docs[0],v={id:_.id,..._.data()},G=V(m,`modulos/${_.id}/secciones`),H=w(G,q("uid","asc")),J=(await S(H)).docs.map(async r=>{const k=V(m,`modulos/${_.id}/secciones/${r.id}/documentos`),f=w(k,q("uid","asc")),O=(await S(f)).docs.map(R=>({id:R.id,...R.data()}));return{id:r.id,...r.data(),documentos:O}}),K=await Promise.all(J);let I="",L="";if(v.encargado)try{const r=await z(F(m,"departamentos",v.encargado));if(r.exists()){const k=r.data().titular,f=await z(F(m,"usuarios",k));f.exists()&&(I=f.data().nombre,L=f.data().cargo+" de "+r.data().nombre)}}catch(r){console.error("Error cargando encargado",r)}c.value={...v,encargado:{nombre:I,cargo:L},secciones:K}}catch(e){console.error("Error fetching data:",e)}finally{y.value=!1}};return W(()=>{T(M)}),(b,e)=>(a(),x(Y,{class:"min-height-vh py-8"},{default:t(()=>[y.value?(a(),x(B,{key:0,justify:"center"},{default:t(()=>[s(h,{cols:"12",class:"text-center"},{default:t(()=>[s(tt,{indeterminate:"",color:"primary"}),e[0]||(e[0]=i("div",{class:"mt-4 text-grey"},"Cargando información...",-1))]),_:1})]),_:1})):c.value?(a(),x(B,{key:1},{default:t(()=>[s(h,{cols:"12"},{default:t(()=>[i("div",ot,[i("h1",rt,d(c.value.titulo),1),i("div",nt,[s(N,{color:"orange-darken-3",class:"mr-2"},{default:t(()=>[...e[1]||(e[1]=[u("mdi-calendar-clock",-1)])]),_:1}),u(" Fecha de Actualización: "+d(c.value.actualizacion),1)]),i("div",ct,[(a(!0),n(C,null,D(c.value.descripcion,(o,p)=>(a(),n("p",{key:p,class:"mb-3 text-body-1"},d(o.valor),1))),128))]),s(E,{class:"my-6 border-opacity-50",color:"primary"})])]),_:1}),(a(!0),n(C,null,D(c.value.secciones,(o,p)=>(a(),x(h,{cols:"12",key:p,class:"mb-4"},{default:t(()=>[s(Z,{elevation:"2",class:"rounded-lg border px-4 py-6",variant:"flat"},{default:t(()=>[i("div",it,[i("h2",dt,d(o.subtitulo),1),o.descripcion?(a(),n("div",lt,d(o.descripcion),1)):A("",!0),s(E,{class:"mt-4 mx-auto",width:"60"})]),o.documentos&&o.documentos.length>0?(a(),n("div",ut,[s(et,{density:"compact",class:"bg-transparent"},{default:t(()=>[(a(!0),n(C,null,D(o.documentos,(l,g)=>(a(),n("div",{key:g},[l.descripcion?(a(),n("div",mt,[s(N,{size:"small",start:"",class:"mr-1"},{default:t(()=>[...e[2]||(e[2]=[u("mdi-tooltip-text-outline",-1)])]),_:1}),u(" "+d(l.descripcion),1)])):A("",!0),s(at,{href:l.url,target:"_blank",rounded:"lg",color:"primary",class:"mb-2",link:""},{prepend:t(()=>[s(N,{color:"grey-darken-2",icon:"mdi-circle-medium"})]),append:t(()=>[...e[3]||(e[3]=[])]),default:t(()=>[s(st,{class:"text-body-1 text-wrap py-1"},{default:t(()=>[u(d(l.nombre),1)]),_:2},1024)]),_:2},1032,["href"])]))),128))]),_:2},1024)])):(a(),n("div",pt," Sin documentos adjuntos "))]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),x(B,{key:2},{default:t(()=>[s(h,{class:"text-center text-h5 mt-10"},{default:t(()=>[...e[4]||(e[4]=[u(" No se encontró información para este módulo. ",-1)])]),_:1})]),_:1}))]),_:1}))}},St=Q(ft,[["__scopeId","data-v-7741bb61"]]);export{St as default};
