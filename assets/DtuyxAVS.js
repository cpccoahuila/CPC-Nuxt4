import{a as h,g as $,n as L,V as w,m as C}from"./BSqFX4FO.js";import{u as R,f as I}from"./HPFcKID9.js";import{J as S,B as y,a1 as v,a9 as E,S as P,aa as V,ab as A,ac as b,U as B,a0 as M,N as q,O as W,g as k,ad as H,Y as N}from"./B2IfDSsY.js";import{V as U}from"./0iUmDY_O.js";const Y=B({target:[Object,Array]},"v-dialog-transition"),p=new WeakMap,X=S()({name:"VDialogTransition",props:Y(),setup(e,l){let{slots:n}=l;const s={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,f){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),t.style.visibility="";const a=F(e.target,t),{x:c,y:d,sx:r,sy:u,speed:i}=a;if(p.set(t,a),P())h(t,[{opacity:0},{}],{duration:125*i,easing:b}).finished.then(()=>f());else{const o=h(t,[{transform:`translate(${c}px, ${d}px) scale(${r}, ${u})`,opacity:0},{}],{duration:225*i,easing:b});D(t)?.forEach(g=>{h(g,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*i,easing:A})}),o.finished.then(()=>f())}},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,f){await new Promise(o=>requestAnimationFrame(o));let a;!p.has(t)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?a=F(e.target,t):a=p.get(t);const{x:c,y:d,sx:r,sy:u,speed:i}=a;P()?h(t,[{},{opacity:0}],{duration:85*i,easing:V}).finished.then(()=>f()):(h(t,[{},{transform:`translate(${c}px, ${d}px) scale(${r}, ${u})`,opacity:0}],{duration:125*i,easing:V}).finished.then(()=>f()),D(t)?.forEach(g=>{h(g,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*i,easing:A})}))},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>e.target?y(E,v({name:"dialog-transition"},s,{css:!1}),n):y(E,{name:"dialog-transition"},n)}});function D(e){const l=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return l&&[...l]}function F(e,l){const n=$(e),s=L(l),[t,f]=getComputedStyle(l).transformOrigin.split(" ").map(T=>parseFloat(T)),[a,c]=getComputedStyle(l).getPropertyValue("--v-overlay-anchor-origin").split(" ");let d=n.left+n.width/2;a==="left"||c==="left"?d-=n.width/2:(a==="right"||c==="right")&&(d+=n.width/2);let r=n.top+n.height/2;a==="top"||c==="top"?r-=n.height/2:(a==="bottom"||c==="bottom")&&(r+=n.height/2);const u=n.width/s.width,i=n.height/s.height,o=Math.max(1,u,i),g=u/o||0,m=i/o||0,x=s.width*s.height/(window.innerWidth*window.innerHeight),O=x>.12?Math.min(1.5,(x-.12)*10+1):1;return{x:d-(t+s.left),y:r-(f+s.top),sx:g,sy:m,speed:O}}const j=B({fullscreen:Boolean,scrollable:Boolean,...H(C({captureFocus:!0,origin:"center center",scrollStrategy:"block",transition:{component:X},zIndex:2400,retainFocus:!0}),["disableInitialFocus"])},"VDialog"),Q=S()({name:"VDialog",props:j(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,l){let{emit:n,slots:s}=l;const t=M(e,"modelValue"),{scopeId:f}=R(),a=k();function c(){n("afterEnter"),(e.scrim||e.retainFocus)&&a.value?.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function d(){n("afterLeave")}return q(t,async r=>{r||(await N(),a.value.activatorEl?.focus({preventScroll:!0}))}),W(()=>{const r=w.filterProps(e),u=v({"aria-haspopup":"dialog"},e.activatorProps),i=v({tabindex:-1},e.contentProps);return y(w,v({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},r,{modelValue:t.value,"onUpdate:modelValue":o=>t.value=o,"aria-modal":"true",activatorProps:u,contentProps:i,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:c,onAfterLeave:d},f),{activator:s.activator,default:function(){for(var o=arguments.length,g=new Array(o),m=0;m<o;m++)g[m]=arguments[m];return y(U,{root:"VDialog"},{default:()=>[s.default?.(...g)]})}})}),I({},a)}});export{Q as V};
